# Transmitter Reading Web App

## Table of Contents

- [Description](#description)
- [Installation](#installation)
- [Setup](#setup)
- [Configuration](#configuration)
- [License](#license)

## Description

A Flask web app that allows Master Control operator to sign and submit radio transmitter readings to a SQL database.

### Features
* Creates submission form based on prefigured channels to be monitored.
* Integration with Burk API automagically fills out out form with Meter and Status Data. 
* Automated messages generated when:
  - Meter above or below limits defined in configuration
  - Site could not connect to Burk unit
  - Channel value manually changed
* Separate form to log EAS tests.
* Generate PDF reports for individual sites by date range. 
  - Includes any automated messages specific to site or Operator shift notes.
  - Histogram of the Meter values over time.

## Installation

1. Clone the repository.

```shell
git clone https://github.com/ErkMurIndustries/BurkReadingFlaskApp
```

2. Change into the project directory.

```shell
cd your_project_directory
```

3. Install dependencies.

```shell
pip install -r requirement.txt
```

Note that you may need to use a variation of the following command if you have not properly added Python to your environment path.
```shell
python -m pip ...
py -m pip ...
```

## Setup

To use the setup a Flask app, follow these steps:

1. Create a `.env` file in the instance directory in the format below.

```code
FLASK_SQLALCHEMY_DATABASE_URI='sqlite:///test.db'   # on first run, test.db file will be created in this folder.
FLASK_SQLALCHEMY_TRACK_MODIFICATIONS=false          # removes deprecated error messaging from Flask
FLASK_SECRET_KEY = 'secret'                         # generated by app if not present on first run
FLASK_ENCRYPTION_KEY = 'super_secret'               # generated by app if not present on first run
FLASK_DEBUG=true                                    # For use in production only. Adds error messages to terminal
FLASK_YOUR_SETTING = 'setting'                      # will be added to the app.config file
```

- Note: While you can manually add secret key or encryption key to the .env, they will be crytopgraphical generated on first run if not present.
- Also please reference the Flask documentation for linking to any other databases such as MySQL or PostGRES. This setup will create a local database named test in the /instances directory
- The app automatically adds anything prefixed with FLASK_ to the global namespace of the app. You can therefore add any additional settings to the application using the prefix FLASK_ then the name of your variable for example FLASK_YOUR_SETTING. These variable can be referenced in any route using the: `current_app.config['YOUR_SETTING']` dict call
- These settings will only load when the app is started. If any changes are made to the .env while the app is running they need to also be added to the app.config to be referenced in the app without restarting.

### Burk Config

- Requires ArcPlus version 5.1.1.1 or later
- Login to the unit with AutoLoad.
- Navigate to Edit > Settings > API Tokens
- Make sure the "Enable API Tokens" option is checked
- Select "Add Token"
- For security reasons, it is best to leave the Permission as Observer. If any bad actors got access to this key, they would not be able to issue commands to the ArcPlus.

.... INSERT MORE DOCUMENTATION HERE ....

## License

This project is licensed under the terms of the [MIT license](LICENSE).

